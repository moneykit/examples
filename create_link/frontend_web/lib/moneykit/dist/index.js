import{a as p}from"./chunk-BTI6RZUX.js";import"./chunk-XWFVHDWU.js";import{a as l,b as y,c as _}from"./chunk-TLOHH7YF.js";var S={};_(S,{exclude:()=>z,extract:()=>F,parse:()=>x,parseUrl:()=>R,pick:()=>U,stringify:()=>N,stringifyUrl:()=>D});var O="%[a-f0-9]{2}",w=new RegExp("("+O+")|([^%]+?)","gi"),C=new RegExp("("+O+")+","gi");function h(e,t){try{return[decodeURIComponent(e.join(""))]}catch(i){}if(e.length===1)return e;t=t||1;let r=e.slice(0,t),n=e.slice(t);return Array.prototype.concat.call([],h(r),h(n))}function $(e){try{return decodeURIComponent(e)}catch(t){let r=e.match(w)||[];for(let n=1;n<r.length;n++)e=h(r,n).join(""),r=e.match(w)||[];return e}}function j(e){let t={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},r=C.exec(e);for(;r;){try{t[r[0]]=decodeURIComponent(r[0])}catch(i){let a=$(r[0]);a!==r[0]&&(t[r[0]]=a)}r=C.exec(e)}t["%C2"]="\uFFFD";let n=Object.keys(t);for(let i of n)e=e.replace(new RegExp(i,"g"),t[i]);return e}function k(e){if(typeof e!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return decodeURIComponent(e)}catch(t){return j(e)}}function g(e,t){if(!(typeof e=="string"&&typeof t=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e===""||t==="")return[];let r=e.indexOf(t);return r===-1?[]:[e.slice(0,r),e.slice(r+t.length)]}function T(e,t){let r={};if(Array.isArray(t))for(let n of t){let i=Object.getOwnPropertyDescriptor(e,n);i!=null&&i.enumerable&&Object.defineProperty(r,n,i)}else for(let n of Reflect.ownKeys(e)){let i=Object.getOwnPropertyDescriptor(e,n);if(i.enumerable){let a=e[n];t(n,a,e)&&Object.defineProperty(r,n,i)}}return r}var B=e=>e==null,P=e=>encodeURIComponent(e).replace(/[!'()*]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`),b=Symbol("encodeFragmentIdentifier");function q(e){switch(e.arrayFormat){case"index":return t=>(r,n)=>{let i=r.length;return n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?r:n===null?[...r,[c(t,e),"[",i,"]"].join("")]:[...r,[c(t,e),"[",c(i,e),"]=",c(n,e)].join("")]};case"bracket":return t=>(r,n)=>n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?r:n===null?[...r,[c(t,e),"[]"].join("")]:[...r,[c(t,e),"[]=",c(n,e)].join("")];case"colon-list-separator":return t=>(r,n)=>n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?r:n===null?[...r,[c(t,e),":list="].join("")]:[...r,[c(t,e),":list=",c(n,e)].join("")];case"comma":case"separator":case"bracket-separator":{let t=e.arrayFormat==="bracket-separator"?"[]=":"=";return r=>(n,i)=>i===void 0||e.skipNull&&i===null||e.skipEmptyString&&i===""?n:(i=i===null?"":i,n.length===0?[[c(r,e),t,c(i,e)].join("")]:[[n,c(i,e)].join(e.arrayFormatSeparator)])}default:return t=>(r,n)=>n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?r:n===null?[...r,c(t,e)]:[...r,[c(t,e),"=",c(n,e)].join("")]}}function H(e){let t;switch(e.arrayFormat){case"index":return(r,n,i)=>{if(t=/\[(\d*)]$/.exec(r),r=r.replace(/\[\d*]$/,""),!t){i[r]=n;return}i[r]===void 0&&(i[r]={}),i[r][t[1]]=n};case"bracket":return(r,n,i)=>{if(t=/(\[])$/.exec(r),r=r.replace(/\[]$/,""),!t){i[r]=n;return}if(i[r]===void 0){i[r]=[n];return}i[r]=[...i[r],n]};case"colon-list-separator":return(r,n,i)=>{if(t=/(:list)$/.exec(r),r=r.replace(/:list$/,""),!t){i[r]=n;return}if(i[r]===void 0){i[r]=[n];return}i[r]=[...i[r],n]};case"comma":case"separator":return(r,n,i)=>{let a=typeof n=="string"&&n.includes(e.arrayFormatSeparator),o=typeof n=="string"&&!a&&f(n,e).includes(e.arrayFormatSeparator);n=o?f(n,e):n;let s=a||o?n.split(e.arrayFormatSeparator).map(d=>f(d,e)):n===null?n:f(n,e);i[r]=s};case"bracket-separator":return(r,n,i)=>{let a=/(\[])$/.test(r);if(r=r.replace(/\[]$/,""),!a){i[r]=n&&f(n,e);return}let o=n===null?[]:n.split(e.arrayFormatSeparator).map(s=>f(s,e));if(i[r]===void 0){i[r]=o;return}i[r]=[...i[r],...o]};default:return(r,n,i)=>{if(i[r]===void 0){i[r]=n;return}i[r]=[...[i[r]].flat(),n]}}}function K(e){if(typeof e!="string"||e.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function c(e,t){return t.encode?t.strict?P(e):encodeURIComponent(e):e}function f(e,t){return t.decode?k(e):e}function L(e){return Array.isArray(e)?e.sort():typeof e=="object"?L(Object.keys(e)).sort((t,r)=>Number(t)-Number(r)).map(t=>e[t]):e}function A(e){let t=e.indexOf("#");return t!==-1&&(e=e.slice(0,t)),e}function V(e){let t="",r=e.indexOf("#");return r!==-1&&(t=e.slice(r)),t}function I(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&typeof e=="string"&&e.trim()!==""?e=Number(e):t.parseBooleans&&e!==null&&(e.toLowerCase()==="true"||e.toLowerCase()==="false")&&(e=e.toLowerCase()==="true"),e}function F(e){e=A(e);let t=e.indexOf("?");return t===-1?"":e.slice(t+1)}function x(e,t){t=l({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t),K(t.arrayFormatSeparator);let r=H(t),n=Object.create(null);if(typeof e!="string"||(e=e.trim().replace(/^[?#&]/,""),!e))return n;for(let i of e.split("&")){if(i==="")continue;let a=t.decode?i.replace(/\+/g," "):i,[o,s]=g(a,"=");o===void 0&&(o=a),s=s===void 0?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?s:f(s,t),r(f(o,t),s,n)}for(let[i,a]of Object.entries(n))if(typeof a=="object"&&a!==null)for(let[o,s]of Object.entries(a))a[o]=I(s,t);else n[i]=I(a,t);return t.sort===!1?n:(t.sort===!0?Object.keys(n).sort():Object.keys(n).sort(t.sort)).reduce((i,a)=>{let o=n[a];return o&&typeof o=="object"&&!Array.isArray(o)?i[a]=L(o):i[a]=o,i},Object.create(null))}function N(e,t){if(!e)return"";t=l({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t),K(t.arrayFormatSeparator);let r=o=>t.skipNull&&B(e[o])||t.skipEmptyString&&e[o]==="",n=q(t),i={};for(let[o,s]of Object.entries(e))r(o)||(i[o]=s);let a=Object.keys(i);return t.sort!==!1&&a.sort(t.sort),a.map(o=>{let s=e[o];return s===void 0?"":s===null?c(o,t):Array.isArray(s)?s.length===0&&t.arrayFormat==="bracket-separator"?c(o,t)+"[]":s.reduce(n(o),[]).join("&"):c(o,t)+"="+c(s,t)}).filter(o=>o.length>0).join("&")}function R(e,t){var i,a;t=l({decode:!0},t);let[r,n]=g(e,"#");return r===void 0&&(r=e),l({url:(a=(i=r==null?void 0:r.split("?"))==null?void 0:i[0])!=null?a:"",query:x(F(e),t)},t&&t.parseFragmentIdentifier&&n?{fragmentIdentifier:f(n,t)}:{})}function D(e,t){t=l({encode:!0,strict:!0,[b]:!0},t);let r=A(e.url).split("?")[0]||"",n=F(e.url),i=l(l({},x(n,{sort:!1})),e.query),a=N(i,t);a&&(a=`?${a}`);let o=V(e.url);if(e.fragmentIdentifier){let s=new URL(r);s.hash=e.fragmentIdentifier,o=t[b]?s.hash:`#${e.fragmentIdentifier}`}return`${r}${a}${o}`}function U(e,t,r){r=l({parseFragmentIdentifier:!0,[b]:!1},r);let{url:n,query:i,fragmentIdentifier:a}=R(e,r);return D({url:n,query:T(i,t),fragmentIdentifier:a},r)}function z(e,t,r){let n=Array.isArray(t)?i=>!t.includes(i):(i,a)=>!t(i,a);return U(e,n,r)}var m=S;var u="https://connect.moneykit.com";function G(e,t){let r=document.createElement("iframe");r.src=e,r.style.position="absolute",r.style.top="0",r.style.left="0",r.style.width="100%",r.style.height="100%",r.style.zIndex="999999";let n=t?document.getElementById(t):document.body;if(!n)throw new Error(`MoneyKit could not find container element with ID "${t}".`);return n.appendChild(r),r}function M(e){e.remove()}var J="moneykit.linkSessionToken",E=class{constructor(t={}){this.options=l({},t)}link(t,r,n,i){let a=y(l({},this.linkParametersFromOptions()),{linkSessionToken:t,origin:window.location.origin}),o=m.stringifyUrl({url:`${u}/start`,query:a});this.launch(o,r,n,i)}relink(t,r,n,i){let a=y(l({},this.linkParametersFromOptions()),{linkSessionToken:t,origin:window.location.origin}),o=m.stringifyUrl({url:`${u}/relink`,query:a});this.launch(o,r,n,i)}continue(t,r,n,i){if(window.opener){window.opener.postMessage({moneykit:!0,type:"link.resume",eventData:{redirectURL:t}},u);return}let a=localStorage.getItem(J);a||console.warn("Unable to get MoneyKit link session token from local storage.");let o=y(l({},this.linkParametersFromOptions()),{linkSessionToken:a,redirectURL:t,origin:window.location.origin}),s=m.stringifyUrl({url:`${u}/continue`,query:o});this.launch(s,r,n,i)}linkParametersFromOptions(){var a,o,s,d;let t=(a=this.options.applicationName)!=null?a:"",r=(o=this.options.theme)!=null?o:p,n=(s=this.options.device)!=null?s:null,i=(d=this.options.stepTimers)!=null?d:!0;return{applicationName:t,theme:JSON.stringify(r),device:n,stepTimers:i}}launch(t,r,n,i){let a=G(t,this.options.containerID),o=new AbortController,s=Y(a,o,r,n,i);window.addEventListener("message",s,{signal:o.signal})}};function Y(e,t,r,n,i){return a=>{if(a.origin!=u||!("moneykit"in a.data||"__moneykitDemo"in a.data))return;let o=a.data;switch(o.type){case"link.complete":r&&o.data.exchangeableToken&&r(o.data.exchangeableToken,o.data.institution),M(e),t.abort();break;case"relink.complete":r&&r(o.data.institution),M(e),t.abort();break;case"link.exit":M(e),n&&n(),t.abort();break;case"link.event":case"demo.link.event":i&&i(o.data);break}}}var le=E,fe=(e,t)=>{switch(t){case 0:return e.typography.largeTitle;case 1:return e.typography.title1;case 2:return e.typography.title2;case 3:return e.typography.title3;case 5:return e.typography.smallBody;case 6:return e.typography.button;case 7:return e.typography.input;default:return e.typography.body}};export{le as default,p as moneyui,fe as themeTypographyStyleForTextStyle};
